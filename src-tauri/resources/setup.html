<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Watchtower Proxy Setup</title>
</head>
<body style="font-family:system-ui,sans-serif;max-width:42em;margin:2em auto;padding:0 1em;line-height:1.5">
<h1>Watchtower Proxy Setup</h1>
<p>This page is served by the Watchtower proxy.%PROXY_PORT_MSG%</p>

<h2>HTTPS certificate installation (Root CA)</h2>
<p>To enable HTTPS interception for all domains, install the <strong>Watchtower Root CA</strong> once.</p>
<p style="text-align:center;margin:1.5em 0">
  <a href="/.watchtower/root.crt" style="display:inline-block;background:#007bff;color:white;text-decoration:none;padding:0.75em 1.5em;border-radius:4px;font-weight:bold">Download Root CA Certificate</a>
</p>
<h3>Installation Steps (Windows)</h3>
<ol>
  <li>Open the downloaded <code>watchtower-root-ca.crt</code> file.</li>
  <li>Click <strong>Install Certificate...</strong></li>
  <li>Select <strong>Local Machine</strong> (requires Admin) -> Next.</li>
  <li>Select <strong>Place all certificates in the following store</strong> -> Browse...</li>
  <li>Select <strong>Trusted Root Certification Authorities</strong> -> OK -> Next -> Finish.</li>
  <li><strong>Restart your browser</strong> to apply changes.</li>
</ol>

<h2>Browser proxy auto config (PAC)</h2>
<p>Enter the URL below in your system or browser's automatic proxy configuration.</p>
<p style="background:#f0f0f0;padding:0.75em;word-break:break-all;font-size:0.9em" id="pac-url"></p>
<p><strong>Windows:</strong> Settings → Network & Internet → Proxy → Use setup script</p>
<p><strong>macOS:</strong> System Settings → Network → Advanced → Proxies → Automatic proxy configuration URL</p>

<h2>Manual proxy setup</h2>
<p>To use manual proxy instead of PAC:</p>
<ul>
<li>Address: <code>127.0.0.1</code></li>
<li>Port: <code>%PROXY_PORT%</code></li>
</ul>
<p>You can configure reverse ports and local routes in the Watchtower app.</p>

<script>
(function(){ var h = window.location.hostname; var el = document.getElementById("cert-host"); var link = document.getElementById("cert-download-link"); if(el) el.textContent = h; if(link) link.href = "/.watchtower/cert/" + encodeURIComponent(h); })();
document.getElementById("pac-url").textContent = window.location.origin + "/.watchtower/proxy.pac";
</script>
</body>
</html>
